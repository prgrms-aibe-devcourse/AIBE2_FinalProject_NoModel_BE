<included>
    <appender name="LOGSTASH" class="net.logstash.logback.appender.LogstashTcpSocketAppender">
        <!-- 로그 스태시 주소 -->
        <destination>localhost:5001</destination>
        <encoder class="net.logstash.logback.encoder.LogstashEncoder">
            <!-- 사용자 정의 필드 추가 - Kibana 분석용 핵심 필드 -->
            <customFields>{"application":"nomodel","environment":"development","service":"spring-boot","version":"1.0.0"}</customFields>
            
            <!-- 필드 이름 매핑 - Kibana 친화적 명명 -->
            <fieldNames>
                <timestamp>@timestamp</timestamp>
                <message>message</message>
                <level>log_level</level>
                <thread>thread_name</thread>
                <logger>logger_name</logger>
            </fieldNames>
            
            <!-- MDC 포함 - 추적 및 컨텍스트 정보 -->
            <includeMdc>true</includeMdc>
            
            <!-- 구조화된 arguments 포함 -->
            <includeStructuredArguments>true</includeStructuredArguments>
            
            <!-- Context 포함 -->
            <includeContext>true</includeContext>
            
            <!-- 메서드 및 라인 정보 포함 (성능 영향 고려) -->
            <includeCallerData>false</includeCallerData>
            
            <!-- JSON 포맷 최적화 -->
            <shortenedLoggerNameLength>36</shortenedLoggerNameLength>
        </encoder>
        
        <!-- 연결 실패 시 재시도 설정 -->
        <keepAliveDuration>5 minutes</keepAliveDuration>
        <reconnectionDelay>10 second</reconnectionDelay>
        
        <!-- 비동기 처리를 위한 링 버퍼 설정 -->
        <ringBufferSize>1024</ringBufferSize>
    </appender>
</included>